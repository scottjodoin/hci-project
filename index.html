<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pentagon Test</title>
  <style>
    *{font-family: Verdana, Geneva, Tahoma, sans-serif;}
    .pentagon-wrapper{width:100%; display:flex;justify-content: center;}
    .pentagon-svg{width:100%;}
    .selection-dot{pointer-events: none;}
  </style>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
</head>
<body>


<!-- positive pentagon-->
<!-- note! No width and height are specified because it messes with the accuracy of the coordinates-->
<div class=pentagon-wrapper>
  <svg
    id="positive-pentagon-svg"
    class="pentagon-svg"
    viewBox="0 0 170 110"
    version="1.1"
    <defs>
      <linearGradient
        inkscape:collect="always"
        id="linearGradient1">
        <stop
          style="stop-color:#ffffff;stop-opacity:0.52941179"
          offset="0"
          id="stop845" />
        <stop
          style="stop-color:#01ec00;stop-opacity:1"
          offset="1"
          id="stop847" />
      </linearGradient>
      <radialGradient
        inkscape:collect="always"
        xlink:href="#linearGradient1"
        id="radialGradient1"
        gradientUnits="userSpaceOnUse"
        gradientTransform="matrix(0.60198716,0.83088922,-0.77260396,0.5597589,76.026947,-22.434452)"
        cx="65.950211"
        cy="68.892227"
        fx="65.950211"
        fy="68.892227"
        r="50.276623" />
    </defs>
    <g
      id="emotion-pentagon"
      transform="translate(20,-10)">
      <path
        style="opacity:1;vector-effect:none;fill:url(#radialGradient1);fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1"
        class="emote-pentagon"
        d="m 62.501718,24.660576 44.101052,32.041291 -16.845105,51.843893 -54.511898,0 -16.845102,-51.843896 z"/>
      <text
        xml:space="preserve"
        style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:9.68536854px;line-height:1.25;font-family:velino;-inkscape-font-specification:velino;text-align:center;letter-spacing:0px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.26458332;opacity:0.97;"
        x="61.76329"
        y="18.98295"
        id="emote-1"><tspan
          sodipodi:role="line"
          id="tspan20"
          x="61.76329"
          y="18.98295"
          style="text-align:center;text-anchor:middle;stroke-width:0.26458332;">Emote1</tspan></text>
      <text
        y="52.866283"
        x="126.68681"
        style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:9.68536854px;line-height:1.25;font-family:velino;-inkscape-font-specification:velino;text-align:center;letter-spacing:0px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.26458332"
        xml:space="preserve"><tspan
          style="text-align:center;text-anchor:middle;stroke-width:0.26458332"
          y="52.866283"
          x="126.68681"
          id="emote-2"
          sodipodi:role="line">Emote2</tspan></text>
      <text
        xml:space="preserve"
        style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:9.68536854px;line-height:1.25;font-family:velino;-inkscape-font-specification:velino;text-align:center;letter-spacing:0px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.26458332"
        x="97.398636"
        y="119.18237"><tspan
          sodipodi:role="line"
          id="emote-3"
          x="97.398636"
          y="119.18237"
          style="text-align:center;text-anchor:middle;stroke-width:0.26458332">Emote3</tspan></text>
      <text
        y="118.37868"
        x="28.966824"
        style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:9.68536854px;line-height:1.25;font-family:velino;-inkscape-font-specification:velino;text-align:center;letter-spacing:0px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.26458332"
        xml:space="preserve"><tspan
          style="text-align:center;text-anchor:middle;stroke-width:0.26458332"
          y="118.37868"
          x="28.966824"
          id="emote-4"
          sodipodi:role="line">Emote4</tspan></text>
      <text
        xml:space="preserve"
        style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:9.68536854px;line-height:1.25;font-family:velino;-inkscape-font-specification:velino;text-align:center;letter-spacing:0px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.26458332"
        x="-1.689531"
        y="53.937881"
        inkscape:label="#text30"><tspan
          sodipodi:role="line"
          id="emote-5"
          x="-1.6895304"
          y="53.937881"
          style="text-align:center;text-anchor:middle;stroke-width:0.26458332">Emote5</tspan></text>
    </g>
    <circle
    class="selection-dot"
    style="opacity:1;vector-effect:none;fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:2;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1"
    cx="83.138962"
    cy="58.890503"
    r="3.2480223"
    />
  </svg>
</div>

<div class=field>
  <label for=mousecoords>Mouse X/Y</label><input id="mousecoords" type=text />
</div>
<div class=field>
  <label for=emote-range-1>Emote1</label><input id="emote-range-1" type=range min=0 max=100 />
</div>
<div class=field>
  <label for=emote-range-2>Emote2</label><input id="emote-range-2" type=range min=0 max=100 />
</div>
<div class=field>
  <label for=emote-range-3>Emote3</label><input id="emote-range-3" type=range min=0 max=100 />
</div>
<div class=field>
  <label for=emote-range-4>Emote4</label><input id="emote-range-4" type=range min=0 max=100 />
</div>
<div class=field>
  <label for=emote-range-5>Emote5</label><input id="emote-range-5" type=range min=0 max=100 />
</div>

<script>
  
  function centerPoint(pts){
    let x = 0, y = 0;
    for (p of pts){
      x += p.x;
      y += p.y;
    }
    return {x: x/pts.length, y: y/pts.length};
  }

  function ptDist(p1,p2){
    return Math.sqrt((p1.x-p2.x)**2  + (p1.y-p2.y)**2);
  }

  $(".emote-pentagon").on("mousemove",(e)=>{
    let parentSVG = $(e.target).closest("svg")[0];   
    let svgOffset = {x:20,y:-10};
    // this could be stored outside this method
    let svgViewBox = $(parentSVG).attr("viewBox").split(" ");
    let svgWidth = +svgViewBox[2];
    let svgHeight = +svgViewBox[3];
    let fivepts = [{x:82, y:15},{x:125, y:46},{x:109, y:97},{x:56, y:98},{x:38, y:46}];

    let center = centerPoint(fivepts);
    let radius = ptDist(center,fivepts[0]);
    
    // find the mouse point relative to the svg
    let svgClientRect = parentSVG.getBoundingClientRect();
    let svgX = (e.clientX - svgClientRect.x) * svgWidth / svgClientRect.width;
    let svgY = (e.clientY - svgClientRect.y) * svgHeight / svgClientRect.height;
    let mousePt = {x:svgX,y:svgY};

    // apply the emote values to the ranges
    let emoteVals = fivepts
      .map(p=>1 - ptDist(p,mousePt)/radius)
      .map(p=>(p<0)?0:p); // clamp negative values

    for (let i=0; i < emoteVals.length; i++){
      let v = Math.floor(emoteVals[i]*100);
      console.log(v);
      $(`#emote-range-${i+1}`).val(v); 
    }
    
    // set the mouse coord box
    $("#mousecoords").val(`x:${Math.floor(svgX)}, y:${Math.floor(svgY)}`);

    // move the svg dot
    let selectionDot = $(".selection-dot").first();
    selectionDot.attr("cx",svgX);
    selectionDot.attr("cy",svgY);
  })
</script>
</body>
</html>